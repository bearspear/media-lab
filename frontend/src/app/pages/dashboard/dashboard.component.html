<div class="dashboard-container">
  <!-- Page Header -->
  <header class="dashboard-header">
    <div>
      <h1 class="dashboard-title">Dashboard</h1>
      <p class="dashboard-subtitle" *ngIf="currentUser">
        Welcome back, {{ currentUser.firstName }}!
      </p>
    </div>
  </header>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <p-card class="stat-card digital-card">
      <div class="stat-content">
        <div class="stat-icon-wrapper digital-icon">
          <i class="pi pi-file"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ digitalCount }}</div>
          <div class="stat-label">Digital Items</div>
          <div class="stat-desc">eBooks, PDFs, Audiobooks</div>
        </div>
      </div>
    </p-card>

    <p-card class="stat-card physical-card">
      <div class="stat-content">
        <div class="stat-icon-wrapper physical-icon">
          <i class="pi pi-book"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ physicalCount }}</div>
          <div class="stat-label">Physical Items</div>
          <div class="stat-desc">Books, DVDs, CDs</div>
        </div>
      </div>
    </p-card>

    <p-card class="stat-card total-card">
      <div class="stat-content">
        <div class="stat-icon-wrapper total-icon">
          <i class="pi pi-database"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ totalCount }}</div>
          <div class="stat-label">Total Items</div>
          <div class="stat-desc">All items in library</div>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Continue Reading Section -->
  <div class="continue-reading-section" *ngIf="continueReadingItems.length > 0">
    <div class="section-header">
      <h2 class="section-title">
        <i class="pi pi-book"></i>
        Continue Reading
      </h2>
      <p class="section-desc">Pick up where you left off</p>
    </div>

    <div class="continue-reading-grid">
      <p-card *ngFor="let item of continueReadingItems" class="continue-reading-card">
        <div class="reading-item-content">
          <!-- Cover Image -->
          <div class="reading-item-cover">
            <img
              *ngIf="item.coverImage"
              [src]="item.coverImage"
              [alt]="item.title"
              class="cover-image"
            />
            <div *ngIf="!item.coverImage" class="cover-placeholder">
              <i class="pi pi-file-pdf"></i>
            </div>
          </div>

          <!-- Item Info -->
          <div class="reading-item-info">
            <h3 class="reading-item-title">{{ item.title }}</h3>
            <p class="reading-item-meta" *ngIf="item.progress.lastReadAt">
              <i class="pi pi-clock"></i>
              Last read {{ getRelativeTime(item.progress.lastReadAt) }}
            </p>

            <!-- Progress -->
            <div class="reading-progress">
              <div class="progress-header">
                <span class="progress-label">{{ item.progress.percentage | number:'1.0-0' }}% complete</span>
                <span class="progress-pages" *ngIf="item.progress.location">
                  Page {{ item.progress.location }}
                </span>
              </div>
              <p-progressBar
                [value]="item.progress.percentage"
                [showValue]="false"
                styleClass="reading-progress-bar"
              ></p-progressBar>
            </div>

            <!-- Continue Button -->
            <button
              pButton
              label="Continue Reading"
              icon="pi pi-play"
              (click)="continueReading(item)"
              class="continue-btn"
            ></button>
          </div>
        </div>
      </p-card>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions-section">
    <p-card class="quick-actions-card">
      <h2 class="section-title">Quick Actions</h2>
      <p class="section-desc">Manage your collection with these shortcuts</p>
      <div class="actions-grid">
        <button pButton label="View Library" icon="pi pi-book" (click)="goToLibrary()" class="action-btn primary-btn"></button>
        <button pButton label="Add Digital Item" icon="pi pi-plus-circle" (click)="addDigitalItem()" class="action-btn secondary-btn"></button>
        <button pButton label="Add Physical Item" icon="pi pi-box" (click)="addPhysicalItem()" class="action-btn success-btn"></button>
      </div>
    </p-card>
  </div>

  <!-- Management Grid -->
  <div class="section-header">
    <h2 class="section-title">Management</h2>
    <p class="section-desc">Organize and categorize your collection</p>
  </div>

  <div class="management-grid">
    <p-card class="management-card">
      <div class="management-content">
        <div class="management-icon authors-icon">
          <i class="pi pi-users"></i>
        </div>
        <h3 class="management-title">Authors</h3>
        <p class="management-desc">Manage your author database</p>
        <button pButton label="Manage" icon="pi pi-arrow-right" iconPos="right" (click)="goToAuthors()" class="management-btn"></button>
      </div>
    </p-card>

    <p-card class="management-card">
      <div class="management-content">
        <div class="management-icon publishers-icon">
          <i class="pi pi-building"></i>
        </div>
        <h3 class="management-title">Publishers</h3>
        <p class="management-desc">Manage your publisher database</p>
        <button pButton label="Manage" icon="pi pi-arrow-right" iconPos="right" (click)="goToPublishers()" class="management-btn"></button>
      </div>
    </p-card>

    <p-card class="management-card">
      <div class="management-content">
        <div class="management-icon genres-icon">
          <i class="pi pi-list"></i>
        </div>
        <h3 class="management-title">Genres</h3>
        <p class="management-desc">Manage genre categories</p>
        <button pButton label="Manage" icon="pi pi-arrow-right" iconPos="right" (click)="goToGenres()" class="management-btn"></button>
      </div>
    </p-card>
  </div>

  <!-- Organization Grid -->
  <div class="section-header">
    <h2 class="section-title">Organization</h2>
    <p class="section-desc">Collections and tags for better organization</p>
  </div>

  <div class="organization-grid">
    <p-card class="organization-card">
      <div class="organization-content">
        <div class="organization-icon collections-icon">
          <i class="pi pi-folder"></i>
        </div>
        <h3 class="organization-title">Collections</h3>
        <p class="organization-desc">Organize items into custom collections</p>
        <button pButton label="Manage Collections" icon="pi pi-arrow-right" iconPos="right" (click)="goToCollections()" class="organization-btn"></button>
      </div>
    </p-card>

    <p-card class="organization-card">
      <div class="organization-content">
        <div class="organization-icon tags-icon">
          <i class="pi pi-tags"></i>
        </div>
        <h3 class="organization-title">Tags</h3>
        <p class="organization-desc">Create and manage custom tags</p>
        <button pButton label="Manage Tags" icon="pi pi-arrow-right" iconPos="right" (click)="goToTags()" class="organization-btn"></button>
      </div>
    </p-card>
  </div>
</div>
