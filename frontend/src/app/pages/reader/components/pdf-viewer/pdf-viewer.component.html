<div class="pdf-viewer-container">
  <!-- Loading Overlay -->
  <div *ngIf="isLoading" class="pdf-loading-overlay">
    <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
    <p>Loading PDF...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="pdf-error">
    <i class="pi pi-exclamation-triangle" style="font-size: 2rem"></i>
    <p>{{ error }}</p>
  </div>

  <!-- PDF Controls -->
  <div *ngIf="!isLoading && !error" class="pdf-controls">
    <!-- Page Navigation -->
    <div class="control-group">
      <button
        pButton
        icon="pi pi-chevron-left"
        class="p-button-text p-button-sm"
        (click)="previousPage()"
        [disabled]="!canGoToPreviousPage()"
        pTooltip="Previous page"
        tooltipPosition="bottom"
      ></button>
      <span class="page-info">
        Page {{ page }} of {{ totalPages }}
      </span>
      <button
        pButton
        icon="pi pi-chevron-right"
        class="p-button-text p-button-sm"
        (click)="nextPage()"
        [disabled]="!canGoToNextPage()"
        pTooltip="Next page"
        tooltipPosition="bottom"
      ></button>
    </div>

    <!-- Zoom Controls -->
    <div class="control-group">
      <button
        pButton
        icon="pi pi-search-minus"
        class="p-button-text p-button-sm"
        (click)="zoomOut()"
        [disabled]="!canZoomOut()"
        pTooltip="Zoom out"
        tooltipPosition="bottom"
      ></button>
      <span class="zoom-info">{{ getZoomPercentage() }}</span>
      <button
        pButton
        icon="pi pi-search-plus"
        class="p-button-text p-button-sm"
        (click)="zoomIn()"
        [disabled]="!canZoomIn()"
        pTooltip="Zoom in"
        tooltipPosition="bottom"
      ></button>
      <button
        pButton
        icon="pi pi-refresh"
        class="p-button-text p-button-sm"
        (click)="resetZoom()"
        pTooltip="Reset zoom"
        tooltipPosition="bottom"
      ></button>
    </div>

    <!-- Rotation Controls -->
    <div class="control-group">
      <button
        pButton
        icon="pi pi-replay"
        class="p-button-text p-button-sm"
        (click)="rotateCounterClockwise()"
        pTooltip="Rotate left"
        tooltipPosition="bottom"
      ></button>
      <button
        pButton
        icon="pi pi-undo"
        class="p-button-text p-button-sm"
        (click)="rotateClockwise()"
        pTooltip="Rotate right"
        tooltipPosition="bottom"
      ></button>
    </div>
  </div>

  <!-- PDF Viewer (always rendered) -->
  <div class="pdf-content" *ngIf="!error">
    <pdf-viewer
      [src]="src"
      [page]="page"
      [zoom]="zoom"
      [rotation]="rotation"
      [original-size]="false"
      [show-all]="true"
      [fit-to-page]="false"
      [autoresize]="true"
      [render-text]="true"
      [render-text-mode]="2"
      [external-link-target]="'blank'"
      (after-load-complete)="onLoadComplete($event)"
      (error)="onError($event)"
      (page-rendered)="onPageRendered($event)"
      style="display: block; width: 100%; height: 100%;"
    ></pdf-viewer>
  </div>
</div>
